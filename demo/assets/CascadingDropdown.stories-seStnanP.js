import{a as g,j as i,c as B}from"./index-O-l6OFW6.js";import{i as N,e as F,c as y,g as _,a as v,F as D,b as M,S as w}from"./Submit-ZWH0ymzD.js";import{r as f}from"./index-2fYL9DzZ.js";import{S as x,a as V,b as I,A as k,c as L,d as P}from"./DropDown-JnTL_igb.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./preview-errors-4EJmg-NZ.js";import"./index-PPLHz8o0.js";import"./emotion-use-insertion-effect-with-fallbacks.browser.esm-uzpk7B40.js";import"./index-hIUESwVt.js";const O=o=>{const{className:a,cx:e,data:l,getStyles:s,innerRef:r,label:n,isDisabled:t,isFocused:u,isSelected:p,innerProps:A}=o;return l.children&&l.children.length>0?g("div",{ref:r,className:B(e({option:!0,"option--is-disabled":t,"option--is-focused":u,"option--is-selected":p},a),L(s("option",o))),...A,children:[n,i("span",{className:"react-select__option--arrow"})]}):i(P.Option,{...o})},R={select:"Select"},h=class h extends f.Component{constructor(a){super(a),this.onBlur=()=>{this.props.onBlur(),this.setState({menuIsOpen:!1})},this.onFocus=()=>{this.props.onFocus(),this.setState({menuIsOpen:!0})},this.onChange=e=>{if(this.childInput&&this.childInput.current&&this.childInput.current.clearValue(),e&&e.children&&e.children.length>0)return this.setState({value:e,menuIsOpen:!1,subChoice:!0}),this.select.current.inputRef.blur(),this.props.onChange(null),!0;this.setState({value:e,menuIsOpen:!1,subChoice:!1}),this.select.current.inputRef.blur();const l=e?e.value:null;return this.props.onChange(l),!0},this.handleChildrenChange=e=>{this.props.onChange(e)},this.closeMenu=()=>{this.select.current.inputRef.blur()},this.loadOptions=e=>{const{dataSource:l}=this.props,s=this.props.value;return Array.isArray(l.getOptions)?l.getOptions:l.getOptions(e).then(r=>{const n=r.find(t=>t.value===s);return this.setState({value:n}),r})},this.clearValue=()=>{this.setState({value:null})},this.setStateValue=()=>{const{value:e,subChoice:l}=this.state,{value:s,dataSource:r}=this.props;if(l)return;const n=u=>Array.isArray(u)?u.find(p=>p.value===s||!!n(p.children)):null,t=n(r.getOptions)||null;Array.isArray(r.getOptions)&&JSON.stringify(t)!==JSON.stringify(e)&&!(e&&!N(e)&&typeof e!="number"&&e.children&&e.children.length)&&this.setState({value:t})},this.i18n=F(R,a.i18n),this.select=f.createRef(),this.state={menuIsOpen:!1,options:a.dataSource.getOptions},this.childInput=f.createRef()}componentDidMount(){this.setStateValue()}componentDidUpdate(){this.setStateValue()}render(){const{name:a,dataSource:e,isClearable:l,isSearchable:s,value:r,...n}=this.props,{value:t}=this.state;return Array.isArray(e.getOptions)?g("div",{className:"dp-cascading-dropdown",children:[i(x,{ref:this.select,name:a,isClearable:l,isSearchable:s,components:{SelectContainer:V,Option:O,DropdownIndicator:u=>i(I,{closeMenu:this.closeMenu,...u})},menuIsOpen:this.state.menuIsOpen,options:e.getOptions,classNamePrefix:"react-select",placeholder:this.i18n.select,...n,value:t,onFocus:this.onFocus,onBlur:this.onBlur,onChange:this.onChange}),t&&t.children&&t.children.length>0?i("div",{className:"children",children:i(h,{value:r,dataSource:{getOptions:t.children},onChange:this.handleChildrenChange,ref:this.childInput})}):null]}):i(k,{ref:this.select,value:this.state.value,name:a,isClearable:l,isSearchable:s,defaultOptions:!0,cacheOptions:!0,components:{SelectContainer:V,Option:O,DropdownIndicator:u=>i(I,{closeMenu:this.closeMenu,...u})},loadOptions:u=>this.loadOptions(u),classNamePrefix:"react-select",...n,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus})}};h.defaultProps={i18n:{},onBlur(){},onFocus(){}};let c=h;const b=class b extends y{constructor(){super(...arguments),this.onBlur=a=>{const{name:e}=this.props;this.props.onBlur(),a&&a.setFieldTouched(e,!0)},this.onChange=(a,e)=>{const{name:l,handleChange:s}=this.props,n=(typeof e=="object"&&e!==null?e.value:e)||null;a.setFieldValue(l,n),s(n)}}renderField({form:a}){return i(c,{onBlur:()=>this.onBlur(a),onChange:e=>this.onChange(a,e),value:_(a.values,this.props.name),...this.props})}};b.defaultProps={...y.defaultProps,handleChange(){},isClearable:!1,isSearchable:!0,onBlur(){},onFocus(){}};let d=b;try{c.displayName="CascadingDropDownInput",c.__docgenInfo={description:"",displayName:"CascadingDropDownInput",props:{dataSource:{defaultValue:null,description:"",name:"dataSource",required:!0,type:{name:"DataSource"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string | number) => void"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!0,type:{name:"() => void"}},onFocus:{defaultValue:null,description:"",name:"onFocus",required:!0,type:{name:"() => void"}},isClearable:{defaultValue:null,description:"",name:"isClearable",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string | number"}},isSearchable:{defaultValue:null,description:"",name:"isSearchable",required:!1,type:{name:"boolean"}},key:{defaultValue:null,description:"",name:"key",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},errorsName:{defaultValue:null,description:"",name:"errorsName",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},fClassName:{defaultValue:null,description:"",name:"fClassName",required:!1,type:{name:"string"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},i18n:{defaultValue:{value:"{}"},description:"",name:"i18n",required:!1,type:{name:"I18nType"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"string"}},validate:{defaultValue:null,description:"",name:"validate",required:!1,type:{name:"() => void"}}}}}catch{}try{d.displayName="CascadingDropDown",d.__docgenInfo={description:"",displayName:"CascadingDropDown",props:{handleChange:{defaultValue:null,description:"",name:"handleChange",required:!0,type:{name:"(value: any) => void"}},dataSource:{defaultValue:null,description:"",name:"dataSource",required:!0,type:{name:"DataSource"}},isClearable:{defaultValue:{value:"false"},description:"",name:"isClearable",required:!1,type:{name:"boolean"}},isSearchable:{defaultValue:{value:"true"},description:"",name:"isSearchable",required:!1,type:{name:"boolean"}},key:{defaultValue:null,description:"",name:"key",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},errorsName:{defaultValue:null,description:"",name:"errorsName",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},fClassName:{defaultValue:null,description:"",name:"fClassName",required:!1,type:{name:"string"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},i18n:{defaultValue:null,description:"",name:"i18n",required:!1,type:{name:"I18nType"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"string"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"() => void"}},onFocus:{defaultValue:null,description:"",name:"onFocus",required:!1,type:{name:"() => void"}},validate:{defaultValue:null,description:"",name:"validate",required:!1,type:{name:"() => void"}}}}}catch{}const W={title:"Choices/Cascading Dropdown",component:d,parameters:{layout:"centered",formik:{initialValues:{filling:"bacon"}}},tags:["autodocs"]},j=[{value:"1",label:"Option 1"},{value:"2",label:"Option 2"},{value:"3",label:"Option 3",children:[{value:"3-A",label:"Option 3 - A",children:[{value:"3-A-I",label:"Option 3 - A - I"},{value:"3-A-II",label:"Option 3 - A - II"},{value:"3-A-III",label:"Option 3 - A - III"},{value:"3-A-IV",label:"Option 3 - A - IV"}]},{value:"3-B",label:"Option 3 - B",children:[{value:"3-B-I",label:"Option 3 - B - I"},{value:"3-B-II",label:"Option 3 - B - II"},{value:"3-B-III",label:"Option 3 - B - III"},{value:"3-B-IV",label:"Option 3 - B - IV"}]},{value:"3-C",label:"Option 3 - C"},{value:"3-D",label:"Option 3 - D"}]},{value:"4",label:"Option 4",children:[{value:"4-A",label:"Option 4 - A",children:[{value:"4-A-I",label:"Option 4 - A - I"},{value:"4-A-II",label:"Option 4 - A - II"},{value:"4-A-III",label:"Option 4 - A - III"},{value:"4-A-IV",label:"Option 4 - A - IV"}]},{value:"4-B",label:"Option 4 - B"},{value:"4-C",label:"Option 4 - C"},{value:"4-D",label:"Option 4 - D"}]},{value:"5",label:"Option 5"},{value:"6",label:"Option 6"}],m={args:{name:"multilevel",dataSource:{getOptions:j},label:"Multi Level",handleChanged:v("change")},render:o=>i(D,{initialValues:{multilevel:"1"},onSubmit:v("submit"),children:()=>g(M,{children:[i(d,{...o}),i(w,{children:"Submit"})]})})};var S,C,q;m.parameters={...m.parameters,docs:{...(S=m.parameters)==null?void 0:S.docs,source:{originalSource:`{
  args: {
    name: 'multilevel',
    dataSource: {
      getOptions: multiLevelOptions
    },
    label: 'Multi Level',
    handleChanged: action('change')
  },
  render: args => <Formik initialValues={{
    multilevel: '1'
  }} onSubmit={action('submit')}>
      {() => <Form>
          <CascadingDropDown {...args} />
          <Submit>Submit</Submit>
        </Form>}
    </Formik>
}`,...(q=(C=m.parameters)==null?void 0:C.docs)==null?void 0:q.source}}};const X=["MultiLevel"];export{m as MultiLevel,X as __namedExportsOrder,W as default};
